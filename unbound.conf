server:
    # Listen on all interfaces inside the container
    interface: 0.0.0.0
    port: 53
    
    # Security: Only allow queries from the internal Docker network
    # (Adjust the subnet if your Docker network differs from the default)
    access-control: 172.16.0.0/12 allow
    access-control: 127.0.0.0/8 allow
    access-control: 10.0.0.0/8 allow

    # Prevent DNS Rebinding
    private-address: 10.0.0.0/8
    private-address: 172.16.0.0/12
    private-address: 192.168.0.0/16

    # Allow conditional forwarding
    # (Adjust/add additional domains, if required, based on your local network)
    private-domain: "home.arpa"
    private-domain: "local"

    # Privacy & Performance
    do-ip4: yes
    do-udp: yes
    do-tcp: yes
    hide-identity: yes
    hide-version: yes
    harden-glue: yes
    harden-dnssec-stripped: yes
    use-caps-for-id: yes
    prefetch: yes
    num-threads: 1 # Most home setups only need 1; set to 2 for heavy loads
    msg-cache-slabs: 4
    rrset-cache-slabs: 4
    infra-cache-slabs: 4
    key-cache-slabs: 4

    root-hints: "/etc/unbound/root.hints"
